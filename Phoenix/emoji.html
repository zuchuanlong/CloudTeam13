<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
   <title>AssignmentTwo</title>
   <link href="http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
   <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
   <script src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
   <script src="http://code.highcharts.com/highcharts.js"></script>
   <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=visualization"></script>

   <style type="text/css">
      body {
         background-image: url("images/cityblur.jpg");
         background-attachment: fixed;
         background-repeat: no-repeat;
         background-size: 100%;
      }

      .navbar {
         background-color: rgba(0,0,0,0.6);
         background: rgba(0,0,0,0.6);
         border: 0;
      }

      .navbar-header span {
          padding-left: 30px;
         padding-right: 50px;
         color: white;
         font-family: myriad;
      }

      .nav .image {
         padding-right: 25px;
         color: white;
      }

      .nav .navcontent {
         color: white;
         font-family: myriad;
         font-size: 15px;
      }

      .nav .navcontent:hover {
         color: gray;
      }

      .nav li {
         padding-right: 30px;
      }

      .main {
         width: 1250px;
         margin-left: 100px;
      }

      .lefttab {
         width: auto;
         height: auto;
         margin-top: 150px;
         margin-right: 100px;
         float: left;
         border-radius: 10px;
         background-color: rgba(0,0,0,0.4);
      }

      #myTab {
         width: 250px;
         border-radius: 10px;
      }

      #myTab li {
         padding: 0;
      }

      #myTab a {
         text-align: center;
         border-radius: 10px;
         font-family: myriad;
         font-size: 15px;
      }

      #myTab a:hover {
         background-color: rgba(0,0,0,0.2);
      }

      #myTabContent {
         width: 900px;
         margin-top: 60px;
         float: right;
      }

   </style>

</head>
<body>

   <nav class="navbar navbar-inverse" role="navigation">
      <div class="container">
         <div class="navbar-header">
            <a class="navbar-brand" href="home.html"><span>Phoenix</span></a>
         </div>
         <div>
            <ul class="nav navbar-nav">
               <li><a href="general.html"><span class="image glyphicon glyphicon glyphicon-th-large"></span><span class="navcontent">General</span></a></li>
               <li><a href="sport.html"><span class="image glyphicon glyphicon-bullhorn"></span><span class="navcontent">Sport</span></a></li>
               <li><a href="animal.html"><span class="image glyphicon glyphicon-leaf"></span><span class="navcontent">Animal</span></a></li>
               <li><a href="festival.html"><span class="image glyphicon glyphicon-headphones"></span><span class="navcontent">Festival</span></a></li>
               <li><a href="emoji.html"><span class="image glyphicon glyphicon-eye-open"></span><span class="navcontent">Emoji</span></a></li>
               <li><a href="tourist.html"><span class="image glyphicon glyphicon-picture"></span><span class="navcontent">Tourist</span></a></li>
               <li><a href="choroplexh.html"><span class="image glyphicon glyphicon-globe"></span><span class="navcontent">Choroplexh</span></a></li>
            </ul>
         </div>
      </div>
   </nav>

   <div class="main">
      <div class="lefttab">
         <ul id="myTab" class="nav nav-pills nav-stacked">
            <li id="heatmap" class="active"><a href="#home" data-toggle="tab"><span class="figure">Tweets Distribution</span></a></li>
            <li id="piechart0"><a href="#ios" data-toggle="tab"><span class="figure">Animals Counts</span></a></li>
            <li id="piechart1"><a href="#jmeter" data-toggle="tab"><span class="figure">Sentiment Counts</span></a></li>
            <li id="linechart"><a href="#ejb" data-toggle="tab"><span class="figure">Sentiment Distributions</span></a></li>
         </ul>
      </div>
      <div id="myTabContent" class="tab-content">
         <div class="tab-pane fade in active" id="home">
            <div id="container" style="width: 900px; height: 500px; float: left"></div>
         </div>
         <div class="tab-pane fade" id="ios">
            <div id="container00" style="width: 900px; height: 450px; float: left"></div>
            <img src="images/joy_with_tears.png" alt = "images/joy_with_tears.png.jpg" width=50px; height=50px>
         </div>
         <div class="tab-pane fade" id="jmeter">
            <div id="container01" style="width: 900px; height: 500px; float: left"></div>
            
         </div>
         <div class="tab-pane fade" id="ejb">
            <div id="container2" style="width: 900px; height: 500px; float: left"></div>
         </div>
      </div>
   </div>


   

   <script>
      $(function () {

         /* The list of animals */
         // var list = ['happyusercount_1', 'happyusercount_2', 'happyusercount_3', 'happyusercount_4', 'happyusercount_5'];

         var countlist = ["happyusercount", "sadusercount", "heartsusercount", "gestureusercount", "total_n_urb"];

         var list = ['happy_friend_count_1', 'happy_friend_count_2', 'happy_friend_count_3', 'happy_friend_count_4', 'happy_friend_count_5'];
         var sadlist = ['sad_friend_count_1', 'sad_friend_count_2', 'sad_friend_count_3', 'sad_friend_count_4', 'sad_friend_count_5'];

         var facelist = ["GrinningFace","GrinningFaceWithSmilingEyes","FaceWithTearsOfJoy","SmilingFaceWithOpenMouth","SmilingFaceWithOpenMouthAndSmilingEyes","SmilingFaceWithOpenMouthAndColdSweat","SmilingFaceWithOpenMouthAndTightlyClosedEyes","SmilingFaceWithHalo","SmilingFaceWithHorns","WinkingFace","SmilingFaceWithSmilingEyes","FaceSavouringDeliciousFood","RelievedFace","SmilingFaceWithHeartShapedEyes","SmilingFaceWithSunglasses","SmirkingFace","KissingFace","FaceThrowingAKiss","KissingFaceWithSmilingEyes","KissingFaceWithClosedEyes","FaceWithStuckOutTongue","FaceWithStuckOutTongueAndWinkingEye","FaceWithStuckOutTongueAndTightlyClosedEyes","GrinningCatFaceWithSmilingEyes","CatFaceWithTearsOfJoy","SmilingCatFaceWithOpenMouth","SmilingCatFaceWithHeartShapedEyes","CatFaceWithWrySmile","KissingCatFaceWithClosedEyes","WhiteSmilingFace"];

         /* Pie Chart */
         var petcount = [];
         var happycount = [];

         var count = [];
         var sadcount = [];

         var countarray = [];

         function piechart (pet, number){
            $.ajax({
               url: 'http://115.146.87.254:5984/phoenix_tweets/_design/topic_emoji/_view/' + pet,
               type: 'get',
               dataType: 'jsonp',
               success: function(data) {
                  petcount[number] = parseInt(data.total_rows);
                  happycount[number] = parseInt(data.rows[0].value);
               }
            });
         }

         function columnchart (pet, number){
            $.ajax({
               url: 'http://115.146.87.254:5984/phoenix_tweets/_design/topic_emoji/_view/' + pet,
               type: 'get',
               dataType: 'jsonp',
               success: function(data) {
                  count[number] = parseInt(data.total_rows);
                  sadcount[number] = parseInt(data.rows[0].value);
               }
            });
         }

         function linechart (pet, number){
            $.ajax({
               url: 'http://115.146.87.254:5984/phoenix_tweets/_design/topic_emoji/_view/' + pet,
               type: 'get',
               dataType: 'jsonp',
               success: function(data) {
                  
                  countarray[number] = parseInt(data.rows[0].value);
               }
            });
         }

         var happyfacecount = [];
         var happyface = 0;

         function mulpiechart (pet, number){
            $.ajax({
               url: 'http://115.146.87.254:5984/phoenix_tweets/_design/HappyFace/_view/' + pet,
               type: 'get',
               dataType: 'jsonp',
               success: function(data) {
                  happyfacecount[number] = parseInt(data.rows[0].value);
                  happyface = happyface + happyfacecount[number];
                  
               }
            });
         }

         /* Evoke funtions to get data from couchdb */
         for(var num = 0; num < 5; num++){
            piechart(list[num], num);
            columnchart(sadlist[num], num);
            linechart(countlist[num], num);
         }

         for(var num = 0; num < 30; num++){
            mulpiechart(facelist[num], num);
         }

         /* Pie Chart button click event */
         $("#piechart0").click(function(){

            faceloop();

            $('#container00').highcharts({
               chart: {
                  type: 'column'
               },
               title: {
                  text: 'HappyFace VS SadFace'
               },
               xAxis: {
                  categories: ['xoxoacacia', 'lessliemancini', 'kiingjared', 'MBDTDULCE', 'ItsNyshaTho_', 'CORALraay', 'KARLYYY_WEBB', 'kiarabell_', 'stephaniehowe13', '_chellen']
               },
               credits: {
                  enabled: false
               },
               series: [{
                  name: "Face",
                  data: [petcount[0], -count[0], petcount[1], -count[1], petcount[2], -count[2], petcount[3], -count[3], petcount[4], -count[4]]
               }, {
                  name: 'Friend',
                  data: [happycount[0], -sadcount[0], happycount[1], -sadcount[1], happycount[2], -sadcount[2], happycount[3], -sadcount[3], happycount[4], -sadcount[4]]
               }, {
                  name: "Face/Friend",
                  data: [petcount[0]/happycount[0]*100, -count[0]/sadcount[0]*100, petcount[1]/happycount[1]*100, -count[1]/sadcount[1]*100, petcount[2]/happycount[2]*100, -count[2]/sadcount[2]*100, petcount[3]/happycount[3]*100, -count[3]/sadcount[3]*100, petcount[4]/happycount[4]*100, -count[4]/sadcount[4]*100]
               }]
            });



         });

         /* Pie Chart button click event */
         $("#piechart1").click(function(){



          $('#container01').highcharts({
               chart: {
                  plotBackgroundColor: null,
                  plotBorderWidth: null,
                  plotShadow: false
               },
               title: {
                  text: 'Dog'
               },
               tooltip: {
                  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
               },
               plotOptions: {
                  pie: {
                      allowPointSelect: true,
                      cursor: 'pointer',
                      dataLabels: {
                          enabled: true,
                          format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                          style: {
                              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                          }
                      }
                  }
               },
               series: [{
                  type: 'pie',
                  name: 'Browser share',
                  data: [
                      ['-1', countarray[0]/(countarray[0]+countarray[1]+countarray[2]+countarray[3]+countarray[4])],
                      ['0', countarray[1]/(countarray[0]+countarray[1]+countarray[2]+countarray[3]+countarray[4])],
                      ['+1', countarray[2]/(countarray[0]+countarray[1]+countarray[2]+countarray[3]+countarray[4])],
                      ['0', countarray[3]/(countarray[0]+countarray[1]+countarray[2]+countarray[3]+countarray[4])],
                      ['+1', countarray[4]/(countarray[0]+countarray[1]+countarray[2]+countarray[3]+countarray[4])]
                  ]
               }]
            });
            

         });

         /* Line Chart button click event */
         $("#linechart").click(function(){



          $('#container2').highcharts({
               chart: {
                  plotBackgroundColor: null,
                  plotBorderWidth: null,
                  plotShadow: false
               },
               title: {
                  text: 'Dog'
               },
               tooltip: {
                  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
               },
               plotOptions: {
                  pie: {
                      allowPointSelect: true,
                      cursor: 'pointer',
                      dataLabels: {
                          enabled: true,
                          format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                          style: {
                              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                          }
                      }
                  }
               },
               series: [{
                  type: 'pie',
                  name: 'Browser share',
                  data: [
                      [facelist[0], happyfacecount[0]/happyface],
                      [facelist[1], happyfacecount[1]/happyface],
                      [facelist[2], happyfacecount[2]/happyface],
                      [facelist[3], happyfacecount[3]/happyface],
                      [facelist[4], happyfacecount[4]/happyface],
                      [facelist[5], happyfacecount[5]/happyface],
                      [facelist[6], happyfacecount[6]/happyface],
                      [facelist[7], happyfacecount[7]/happyface],
                      [facelist[8], happyfacecount[8]/happyface],
                      [facelist[9], happyfacecount[9]/happyface],
                      [facelist[10], happyfacecount[10]/happyface],
                      [facelist[11], happyfacecount[11]/happyface],
                      [facelist[12], happyfacecount[12]/happyface],
                      [facelist[13], happyfacecount[13]/happyface],
                      [facelist[14], happyfacecount[14]/happyface],
                      [facelist[15], happyfacecount[15]/happyface],
                      [facelist[16], happyfacecount[16]/happyface],
                      [facelist[17], happyfacecount[17]/happyface],
                      [facelist[18], happyfacecount[18]/happyface],
                      [facelist[19], happyfacecount[19]/happyface],
                      [facelist[20], happyfacecount[20]/happyface],
                      [facelist[21], happyfacecount[21]/happyface],
                      [facelist[22], happyfacecount[22]/happyface],
                      [facelist[23], happyfacecount[23]/happyface],
                      [facelist[24], happyfacecount[24]/happyface],
                      [facelist[25], happyfacecount[25]/happyface],
                      [facelist[26], happyfacecount[26]/happyface],
                      [facelist[27], happyfacecount[27]/happyface],
                      [facelist[28], happyfacecount[28]/happyface],
                      [facelist[29], happyfacecount[29]/happyface]
                  ]
               }]
            });
            

         });

         
      });
   </script>

</body>
</html>			